<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Chapter 10. Clipping and Masking</title>
    <style>
    svg {
      background: lightblue;
      border: thick double navy;
    }
    </style>
  </head>
  <body>
    <svg width="200" height="200" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <defs>
      <clipPath id="rectClip">
      <rect id="rect1" x="55" y="55" width="140" height="145" style="stroke: gray; fill: none;"></rect>
      </clipPath>
      </defs>

      <image xlink:href="http://img11.360buyimg.com/n1/jfs/t328/90/1014784552/197901/e1173be9/542d0c35N167c45c2.jpg" x="0px" y="0px" width="350px" height="350px" style="clip-path: url(#rectClip)">
    </svg>

    <svg width="200" height="150" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <defs>
      <clipPath id="curveClip">
      <path id="curve1" d="M5 55 C 25 5, 45 -25, 75 55, 85 85, 20 105, 40 55 Z" style="stroke: black; fill: none;"></path>
      </clipPath>

      <clipPath id="textClip">
      <!--text's stroke and fill attributes wont affect final result-->
      <text id="text1" x="20" y="20" transform="rotate(60)" style="font-family: 'Liberation Sans';font-size: 48pt; font-weight:bold; stroke: blue; fill: blue;">
        JADE
      </text>
      </clipPath>

      <clipPath id="circleClip">
      <circle id="circle1" cx="45" cy="45" r="25" clipPathUnits="objectBoudingBox" style="fill: #666;"></circle>
      </clipPath>

      <g id="shapes">
      <rect x="0" y="50" width="90" height="60" style="fill: #999;"></rect>
      <circle cx="25" cy="25" r="25" style="fill: #666;"></circle>
      <polygon points="30 0 80 0 80 100" style="fill: #ccc;"></polygon>
      </g>
      </defs>

      <!-- draw with curved clip-path -->
      <g id="clipped" style="display:block">
      <use xlink:href="#shapes" style="clip-path: url(#curveClip);"></use>
      <!-- draw with text as clip-path -->
      <use transform="translate(100, 0)" xlink:href="#shapes" style="clip-path: url(#textClip);"></use>
      <use transform="translate(200, 0)" xlink:href="#shapes" style="clip-path:url(#circleClip)"></use>
      </g>

      <!--it can be display:none to see the clipped shape-->
      <g id="unclipped" style="display:none">
      <g>
      <use xlink:href="#shapes"></use>
      <use xlink:href="#curve1"></use>
      <use xlink:href="#circle1"></use>
      <!-- show clip path -->
      </g>

      <g transform="translate(100, 0)">
      <use xlink:href="#shapes"></use>
      <use xlink:href="#text1"></use>
      <use xlink:href="#circle1"></use>
      </g>
      </g>
    </svg>


    <svg width="300" height="100" viewBox="0 0 300 100" xmlns:xlink="http://www.w3.org/1999/xlink">
      <defs>
      <mask id="fullmask" x="0" y="0" width="1" height="1" maskContentUnits="objectBoundingBox">
      <rect x="0" y="0" width="1" height="1" style="fill-opacity: 1.0; fill: white;" />
      </mask>

      <mask id="quarter3mask" x="0" y="0" width="1" height="1" maskContentUnits="objectBoundingBox">
      <rect x="0" y="0" width="1" height="1" style="fill-opacity: .75; fill: white;" />
      </mask>

      <mask id="quartermask" x="0" y="0" width="1" height="1" maskContentUnits="objectBoundingBox">
      <rect x="0" y="0" width="1" height="1" style="fill-opacity: .25; fill: white;" />
      </mask>

      <mask id="opacityMask" x="0" y="0" width="1" height="1" maskContentUnits="objectBoundingBox">
      <rect x="0" y="0" width="1" height="1" style="fill-opacity: 0.1; fill: white;" />
      </mask>
      </defs>

      <g style="font-size: 14pt; text-anchor:middle; fill:black;">
      <g style="mask: url(#fullmask);">
      <circle cx="35" cy="35" r="25" />
      <text x="35" y="80">100%</text>
      </g>

      <g style="mask: url(#quarter3mask);">
      <circle cx="95" cy="35" r="25" />
      <text x="95" y="80">75%</text>
      </g>

      <g style="mask: url(#quartermask);">
      <circle cx="155" cy="35" r="25" />
      <text x="155" y="80">25%</text>
      </g>

      <g style="mask: url(#opacityMask);">
      <circle cx="215" cy="35" r="25" />
      <text x="215" y="80">10%</text>
      </g>
      </g>
    </svg>

    <!------------------------------ color ------------------------------->
    <svg width="300" height="100" viewBox="0 0 300 100" xmlns:xlink="http://www.w3.org/1999/xlink">
      <defs>
      <mask id="fullmask" x="0" y="0" width="1" height="1" maskContentUnits="objectBoundingBox">
      <rect x="0" y="0" width="1" height="1" style="fill-opacity: 1.0; fill: red;" />
      </mask>

      <mask id="quarter3mask" x="0" y="0" width="1" height="1" maskContentUnits="objectBoundingBox">
      <rect x="0" y="0" width="1" height="1" style="fill-opacity: .75; fill: green;" />
      </mask>

      <mask id="quartermask" x="0" y="0" width="1" height="1" maskContentUnits="objectBoundingBox">
      <rect x="0" y="0" width="1" height="1" style="fill-opacity: .25; fill: blue;" />
      </mask>

      <mask id="opacityMask" x="0" y="0" width="1" height="1" maskContentUnits="objectBoundingBox">
      <rect x="0" y="0" width="1" height="1" style="fill-opacity: 0.1; fill: white;" />
      </mask>
      </defs>

      <g style="font-size: 14pt; text-anchor:middle; fill:black;">
      <g style="mask: url(#fullmask);">
      <circle cx="35" cy="35" r="25" />
      <text x="35" y="80">red</text>
      </g>

      <g style="mask: url(#quarter3mask);">
      <circle cx="95" cy="35" r="25" />
      <text x="95" y="80">green</text>
      </g>

      <g style="mask: url(#quartermask);">
      <circle cx="155" cy="35" r="25" />
      <text x="155" y="80">blue</text>
      </g>

      <g style="mask: url(#opacityMask);">
      <circle cx="215" cy="35" r="25" />
      <text x="215" y="80">white</text>
      </g>
      </g>
    </svg>


    <!---------------------demo------------------------>
    <svg width="200" height="150" viewBox="0 0 400 300">
      <radialGradient id="fade">
      <stop offset="0%" style="stop-color: white; stop-opacity: 1.0;" />
      <stop offset="80%" style="stop-color: white; stop-opacity: 0.5;" />
      <stop offset="100%" style="stop-color: white; stop-opacity: 0.0;" />
      </radialGradient>
      <mask id="fademask" maskContentUnits="objectBoundingBox">
      <rect x="0" y="0" width="1" height="1" style="fill: url(#fade)" />
      </mask>

      <polygon points="0 0, 400 0, 400 300, 0 0" stroke="red" fill="red" />
      <polygon points="0 0, 0 300, 400 300, 0 0" stroke="blue" fill="blue" />

      <image xlink:href="http://img11.360buyimg.com/n1/jfs/t328/90/1014784552/197901/e1173be9/542d0c35N167c45c2.jpg" x="0px" y="0px" width="100px" height="200px" style="mask: url(#quarter3mask);" />

      <image xlink:href="http://img11.360buyimg.com/n1/jfs/t328/90/1014784552/197901/e1173be9/542d0c35N167c45c2.jpg" x="150px" y="50px" width="180px" height="150px" style="mask:url(#fademask);" />
    </svg>
  </body>
</html>
